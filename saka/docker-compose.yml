version: '3.8'

networks:
  saka-network:
    driver: bridge

services:
  kamila-ceo:
    build:
      context: .
      dockerfile: saka/Dockerfile.base
      args:
        REQUIREMENTS_PATH: saka/agents/kamila_ceo/requirements.txt
        AGENT_WORKDIR: /app/saka/agents/kamila_ceo
    ports:
      - "8001:8000"
    networks:
      - saka-network
    environment:
      - AETHERTRADER_URL=http://aethertrader-manager:8000

  athena-sentiment:
    build:
      context: .
      dockerfile: saka/Dockerfile.base
      args:
        REQUIREMENTS_PATH: saka/agents/athena_sentiment/requirements.txt
        AGENT_WORKDIR: /app/saka/agents/athena_sentiment
    ports:
      - "8002:8000"
    networks:
      - saka-network

  sentinel-risk:
    build:
      context: .
      dockerfile: saka/Dockerfile.base
      args:
        REQUIREMENTS_PATH: saka/agents/sentinel_risk/requirements.txt
        AGENT_WORKDIR: /app/saka/agents/sentinel_risk
    ports:
      - "8003:8000"
    networks:
      - saka-network

  aethertrader-manager:
    build:
      context: .
      dockerfile: saka/Dockerfile.base
      args:
        REQUIREMENTS_PATH: saka/agents/aethertrader_manager/requirements.txt
        AGENT_WORKDIR: /app/saka/agents/aethertrader_manager
    ports:
      - "8004:8000"
    networks:
      - saka-network

  # O Orchestrator e outros agentes podem ser adicionados aqui seguindo o mesmo padrão.
  # Stubs não são mais necessários da mesma forma, pois cada agente é um serviço completo.
  polaris-advisor:
    image: alpine:latest
    command: ["sleep", "infinity"]
    networks:
      - saka-network